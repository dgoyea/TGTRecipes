function cValidate(){this.message="",this.REM="info is required. Make sure it contains a valid value!",this.noticeTitle="Notice",this.errorField=new Array,this.customMessage="",this.JOINTEXT=",",this.init=function(){joms.jQuery("#community-wrap form.community-form-validate :input.required").blur(function(){joms.jQuery(this).hasClass("validate-custom-date")||joms.jQuery(this).hasClass("validate-country")||(cvalidate.validateElement(this)?cvalidate.markValid(this):cvalidate.markInvalid(this))}),joms.jQuery("#community-wrap form.community-form-validate :input.validate-profile-email").blur(function(){""!==joms.jQuery.trim(joms.jQuery(this).val())&&(cvalidate.validateElement(this)?cvalidate.markValid(this):cvalidate.markInvalid(this))}),joms.jQuery("#community-wrap form.community-form-validate :input.validate-profile-url").blur(function(){""!==joms.jQuery.trim(joms.jQuery(this).val())&&(cvalidate.validateElement(this)?cvalidate.markValid(this):cvalidate.markInvalid(this))}),joms.jQuery("#community-wrap form.community-form-validate :input.validate-country").change(function(){joms.jQuery(this).hasClass("required")&&(cvalidate.validateElement(this)?cvalidate.markValid(this):cvalidate.markInvalid(this))}),joms.jQuery("#community-wrap form.community-form-validate :input.validate-custom-date").blur(function(){cvalidate.validateElement(this)?cvalidate.markValid(this):cvalidate.markInvalid(this)}),joms.jQuery("#community-wrap form.community-form-validate :input.validate-custom-date").keydown(function(a){46==a.keyCode||8==a.keyCode||9==a.keyCode||27==a.keyCode||13==a.keyCode||65==a.keyCode&&a.ctrlKey===!0||a.keyCode>=35&&a.keyCode<=39||(a.shiftKey||(a.keyCode<48||a.keyCode>57)&&(a.keyCode<96||a.keyCode>105))&&a.preventDefault()}),joms.jQuery("#community-wrap form.community-form-validate :input.validateSubmit").click(function(){if(cvalidate.validateForm())return!0;var a="undefined"==cvalidate.REM||""==cvalidate.REM?"info is required. Make sure it contains a valid value!":cvalidate.REM;if(cvalidate.errorField.length>1?(lastField=cvalidate.errorField.pop(),joms.jQuery(cvalidate.errorField).each(function(b,c){cvalidate.errorField[b]=c+" "+a}),strErrField=cvalidate.errorField.join("<br />")+"<br />"+lastField+" "+a):strErrField=cvalidate.errorField,a=strErrField,""!=cvalidate.customMessage&&(a=cvalidate.customMessage),joms.jQuery("#tnc").hasClass("required")&&cvalidate.errorField.length<1){var b=joms.jQuery("#tnc:checked").val(),a=joms.jQuery("#tnc").data("message");a="Y"!=b?a:cvalidate.REM}return"string"==typeof a&&(a=a.replace(/\n/g,""),a=a.replace("'","\\'")),joms.jQuery("#community-wrap form.community-form-validate :input.required[value='']").each(function(){cvalidate.markInvalid(this)}),!1})},this.setMaxLength=function(a,b){joms.jQuery(a).keyup(function(){var a=parseInt(b);joms.jQuery(this).val().length>a&&joms.jQuery(this).val(joms.jQuery(this).val().substr(0,b))})},this.markInvalid=function(a){var b=a.name;joms.jQuery(a).hasClass("validate-custom-date")?(joms.jQuery("#community-wrap form.community-form-validate input[name='"+b+"']").addClass("invalid"),joms.jQuery("#community-wrap form.community-form-validate select[name='"+b+"']").addClass("invalid")):joms.jQuery(a).addClass("invalid")},this.markValid=function(a){var b=a.name;joms.jQuery(a).hasClass("validate-custom-date")?(joms.jQuery("#community-wrap form.community-form-validate input[name='"+b+"']").removeClass("invalid"),joms.jQuery("#community-wrap form.community-form-validate select[name='"+b+"']").removeClass("invalid")):joms.jQuery(a).removeClass("invalid"),null!=b&&(b=b.replace("[]",""),joms.jQuery("#err"+b+"msg").hide(),joms.jQuery("#err"+b+"msg").html("&nbsp"))},this.validateElement=function(a){var b=!0,c=a.name,d=joms.jQuery(a).attr("type"),e=joms.jQuery.trim(joms.jQuery(a).val());if("text"==d||"password"==d||joms.jQuery(a).is("textarea"))if(""==e)joms.jQuery(a).hasClass("required")&&(b=!1,c=c.replace("[]",""),lblName=joms.jQuery("#lbl"+c).html(),lblName=null==lblName?"Field":lblName.replace("*",""),this.setMessage(c,lblName,"COM_COMMUNITY_REGISTER_INVALID_VALUE"));else{if(joms.jQuery(a).hasClass("validate-name")&&(joms.jQuery(a).val().length<3?(this.setMessage(c,"","COM_COMMUNITY_NAME_TOO_SHORT"),b=!1):(joms.jQuery("#err"+c+"msg").hide(),joms.jQuery("#err"+c+"msg").html("&nbsp"),b=!0)),joms.jQuery(a).hasClass("validate-username")&&joms.jQuery("#usernamepass").val()!=joms.jQuery(a).val()&&(b=cvalidate.ajaxValidateUserName(joms.jQuery(a))),joms.jQuery(a).hasClass("validate-email")&&(regex=/^([*+!.&#$¦\'\\%\/0-9a-z^_`{}=?~:-]+)@(([0-9a-z-]+\.)+[0-9a-z]{2,})$/i,b=regex.test(joms.jQuery(a).val()),0==b?this.setMessage(c,"","COM_COMMUNITY_INVALID_EMAIL"):(joms.jQuery("#err"+c+"msg").hide(),joms.jQuery("#err"+c+"msg").html("&nbsp"),joms.jQuery("#emailpass").val()!=joms.jQuery(a).val()&&(b=cvalidate.ajaxValidateEmail(joms.jQuery(a))))),joms.jQuery(a).hasClass("validate-profile-email")&&(regex=/^([*+!.&#$¦\'\\%\/0-9a-z^_`{}=?~:-]+)@(([0-9a-z-]+\.)+[0-9a-z]{2,})$/i,b=regex.test(joms.jQuery(a).val()),0==b?this.setMessage(c,"","COM_COMMUNITY_INVALID_EMAIL"):(joms.jQuery("#err"+c+"msg").hide(),joms.jQuery("#err"+c+"msg").html("&nbsp"))),joms.jQuery(a).hasClass("validate-profile-url")){var f=joms.jQuery(a).val();f.match("http://")&&(f=f.replace("http://",""),joms.jQuery(a).prev("select").find("option").removeAttr("selected").filter('[value="http://"]').attr("selected","selected")),f.match("https://")&&(f=f.replace("https://",""),joms.jQuery(a).prev("select").find("option").removeAttr("selected").filter('[value="https://"]').attr("selected","selected")),joms.jQuery(a).val(f),c=c.replace("[]",""),regex=/^(([\w]+:)?\/\/)?(([\d\w]|%[a-fA-f\d]{2,2})+(:([\d\w]|%[a-fA-f\d]{2,2})+)?@)?([\d\w][-\d\w]{0,253}[\d\w]\.)+[\w]{2,4}(:[\d]+)?(\/([-+_~.\d\w]|%[a-fA-f\d]{2,2})*)*(\?(&?([-+_~.\d\w]|%[a-fA-f\d]{2,2})=?)*)?(#([-+_~.\d\w]|%[a-fA-f\d]{2,2})*)?$/,b=regex.test(joms.jQuery(a).val()),0==b?this.setMessage(c,"","COM_COMMUNITY_INVALID_URL"):(joms.jQuery("#err"+c+"msg").hide(),joms.jQuery("#err"+c+"msg").html("&nbsp"))}if(joms.jQuery(a).hasClass("validate-password")&&"jspassword"==a.name&&jax.call("community","register,ajaxCheckPassLength",joms.jQuery(a).val().length,c),joms.jQuery(a).hasClass("validate-passverify")&&"jspassword2"==a.name)if(b=joms.jQuery("#jspassword").val()==joms.jQuery(a).val(),0==b){var g=joms.jQuery("input[name=task]").val();"register_save"==g?this.setMessage("jspassword2","","COM_COMMUNITY_REGISTER_PASSWORD_NOT_SAME"):this.setMessage("jspassword2","","COM_COMMUNITY_PASSWORD_NOT_SAME")}else joms.jQuery("#errjspassword2msg").hide(),joms.jQuery("#errjspassword2msg").html("&nbsp");joms.jQuery(a).hasClass("validate-custom-date")&&(b=this.checkCustomDate(a))}else"checkbox"==joms.jQuery(a).attr("type")?joms.jQuery(a).hasClass("validate-custom-checkbox")?(0==joms.jQuery("#community-wrap form.community-form-validate input[name='"+c+"']:checked").size()&&(b=!1),0==b&&(c=c.replace("[]",""),lblName=joms.jQuery("#lbl"+c).html(),lblName=null==lblName?"Field":lblName.replace("*",""),this.setMessage(c,lblName,"COM_COMMUNITY_REGISTER_INVALID_VALUE"))):joms.jQuery(a).attr("checked")||(b=!1):"radio"==joms.jQuery(a).attr("type")?joms.jQuery(a).hasClass("validate-custom-radio")?(0==joms.jQuery("#community-wrap form.community-form-validate input[name='"+c+"']:checked").size()&&(b=!1),0==b&&(lblName=joms.jQuery("#lbl"+c).html(),lblName=null==lblName?"Field":lblName.replace("*",""),this.setMessage(c,lblName,"COM_COMMUNITY_REGISTER_INVALID_VALUE"))):joms.jQuery(a).attr("checked")||(b=!1):joms.jQuery(a).is("select")?(0==joms.jQuery(a).children(":selected").length?b=!1:joms.jQuery(a).children(":selected").each(function(){""==joms.jQuery(a).val()&&(b=!1)}),joms.jQuery(a).hasClass("validate-country")&&"selectcountry"==joms.jQuery(a).val()&&(b=!1),joms.jQuery(a).hasClass("validate-custom-date")?b=this.checkCustomDate(a):0==b&&(c=c.replace("[]",""),lblName=joms.jQuery("#lbl"+c).html(),lblName=null==lblName?"Field":lblName.replace("*",""),this.setMessage(c,lblName,"COM_COMMUNITY_REGISTER_INVALID_VALUE"))):"select-multiple"==joms.jQuery(a).attr("type")&&(0==joms.jQuery(a).children(":selected").length&&(b=!1),0==b&&(c=c.replace("[]",""),lblName=joms.jQuery("#lbl"+c).html(),lblName=null==lblName?"Field":lblName.replace("*",""),this.setMessage(c,lblName,"COM_COMMUNITY_REGISTER_INVALID_VALUE")));return b},this.validateForm=function(){var a=!0;return this.errorField=new Array,joms.jQuery("#community-wrap form.community-form-validate :input.required").each(function(){cvalidate.validateElement(this)||(a=!1)}),joms.jQuery("#community-wrap form.community-form-validate :input.validate-profile-email").each(function(){""!=joms.jQuery.trim(joms.jQuery(this).val())&&(cvalidate.validateElement(this)||(a=!1))}),joms.jQuery("#community-wrap form.community-form-validate :input[class*=minmax]").each(function(){if(this.className.indexOf("minmax")>-1)for(var b=joms.jQuery(this).attr("class").split(" "),c=0;c<b.length;c++)if(0==b[c].indexOf("minmax")){var d=b[c].split("_")[1],e=b[c].split("_")[2],f=joms.jQuery.trim(joms.jQuery(this).val()).length;f>=d&&e>=f||(cvalidate.setMessage(joms.jQuery(this).attr("id"),"","COM_COMMUNITY_REGISTER_INVALID_CHAR_COUNT",d,e),a=!1);break}}),joms.jQuery("#community-wrap form.community-form-validate :input.validate-profile-url").each(function(){""!=joms.jQuery.trim(joms.jQuery(this).val())&&(cvalidate.validateElement(this)||(a=!1))}),a},this.ajaxValidateUserName=function(a){jax.call("community","register,ajaxCheckUserName",joms.jQuery(a).val())},this.ajaxValidateEmail=function(a){jax.call("community","register,ajaxCheckEmail",joms.jQuery(a).val())},this.checkCustomDate=function(el){var isValid=!0,fieldName=el.name;if(joms.jQuery(el).hasClass("validate-custom-date")){fieldId=fieldName.replace("[]","");for(var dateObj=joms.jQuery("#community-wrap form.community-form-validate input[name='"+fieldName+"']"),i=0;i<dateObj.length;i++)/^-?\d+$/.test(dateObj[i].value)||(isValid=!1);var dateObj2=joms.jQuery("#community-wrap form.community-form-validate select[name='"+fieldName+"']"),dd=dateObj[0].value,mm=dateObj2[0].value,yy=dateObj[1].value,dayobj=new Date(yy,eval(mm-1),dd);(dayobj.getMonth()+1!=mm||dayobj.getDate()!=dd||dayobj.getFullYear()!=yy)&&(isValid=!1),0==isValid?this.setMessage(fieldId,"","COM_COMMUNITY_INVALID_DATE"):(joms.jQuery("#err"+fieldId+"msg").hide(),joms.jQuery("#err"+fieldId+"msg").html("&nbsp"))}return isValid},this.setMessage=function(a,b,c,d,e){joms.jQuery('label[for="'+a+'"]').length<0||"undefined"!=typeof joms.jQuery('label[for="'+a+'"]').html()&&(errorLabel=joms.jQuery('label[for="'+a+'"]').html().replace("*",""),-1==joms.jQuery.inArray(errorLabel,this.errorField)&&this.errorField.push(errorLabel),jax.call("community","register,ajaxSetMessage",a,b,c,d,e))},this.setSystemText=function(key,text){eval("cvalidate."+key+' = "'+text+'"')}}var cvalidate=new cValidate;!function(a){var b=new function(){this.countRegexp=function(a,b){var c=a.match(b);return c?c.length:0},this.getStrength=function(a,b){var c=a.length;if(b>c)return 0;var d=this.countRegexp(a,/\d/g),e=this.countRegexp(a,/[a-z]/g),f=this.countRegexp(a,/[A-Z]/g),g=c-d-e-f;if(d==c||e==c||f==c||g==c)return 1;var h=0;return d&&(h+=2),e&&(h+=f?4:3),f&&(h+=e?4:3),g&&(h+=5),c>10&&(h+=1),h},this.getStrengthLevel=function(a,b){var c=this.getStrength(a,b);switch(!0){case 0>=c:return 1;case c>0&&4>=c:return 2;case c>4&&8>=c:return 3;case c>8&&12>=c:return 4;case c>12:return 5}return 1}};a.fn.password_strength=function(c){var d=a.extend({container:null,minLength:6,texts:{1:"Too weak",2:"Weak password",3:"Normal strength",4:"Strong password",5:"Very strong password"}},c);return this.each(function(){if(d.container)var c=a(d.container);else{var c=a("<span/>").attr("class","jsPasswordStrength");a(this).after(c)}a(this).keyup(function(){var e=a(this).val();if(e.length>0){var f=b.getStrengthLevel(e,d.minLength),g="jsPasswordStrength_"+f;!c.hasClass(g)&&f in d.texts&&(c.text(d.texts[f]).attr("class","jsPasswordStrength "+g),1==f?joms.jQuery("#btnSubmit").attr("disabled",!0):joms.jQuery("#btnSubmit").attr("disabled",!1))}else c.text("").attr("class","jsPasswordStrength")})})}}(joms.jQuery);